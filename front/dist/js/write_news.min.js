function News(){this.progressGroup=$("#progress-group")}News.prototype.run=function(){var t=this;t.initUEditor(),t.listenSubmitEvent(),t.listenUploadFileEvent()},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),puaajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),r=window.ue.getContent(),s="";s=e?"/cms/edit_news/":"/cms/write_news/",puaajax.post({url:s,data:{title:n,category:i,desc:o,thumbnail:a,content:r,pk:e},success:function(t){200===t.code&&puaalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()})}})})},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJwcm9ncmVzc0dyb3VwIiwiJCIsInByb3RvdHlwZSIsInJ1biIsInNlbGYiLCJpbml0VUVkaXRvciIsImxpc3RlblN1Ym1pdEV2ZW50IiwibGlzdGVuVXBsb2FkRmlsZUV2ZW50Iiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwdWFhamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwiYXR0ciIsInRpdGxlIiwiY2F0ZWdvcnkiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsImdldENvbnRlbnQiLCJwdWFhbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUNMQyxLQUFLQyxjQUFnQkMsRUFBRSxtQkFHM0JILEtBQUtJLFVBQVVDLElBQU0sV0FDakIsSUFBSUMsRUFBT0wsS0FDWEssRUFBS0MsY0FDTEQsRUFBS0Usb0JBQ0xGLEVBQUtHLHlCQUdUVCxLQUFLSSxVQUFVRyxZQUFjLFdBQ3pCRyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVMsQ0FDOUJDLG1CQUFzQixJQUN0QkMsVUFBYSxzQkFJckJmLEtBQUtJLFVBQVVLLHNCQUF3QixXQUNuQyxJQUFJTyxFQUFZYixFQUFFLGtCQUNsQmEsRUFBVUMsT0FBTyxXQUNiLElBQUlDLEVBQU9GLEVBQVUsR0FBR0csTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUN2QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUM0IsRUFBRSxtQkFDUjRCLElBQUlOLFVBT3ZDekIsS0FBS0ksVUFBVUksa0JBQW9CLFdBQ2ZMLEVBQUUsZUFDUjZCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1oQyxFQUFFRixNQUNDbUMsS0FBSyxnQkFFZEMsRUFBUWxDLEVBQUUsdUJBQXVCNEIsTUFDakNPLEVBQVduQyxFQUFFLDJCQUEyQjRCLE1BQ3hDUSxFQUFPcEMsRUFBRSxzQkFBc0I0QixNQUMvQlMsRUFBWXJDLEVBQUUsMkJBQTJCNEIsTUFDekNVLEVBQVUvQixPQUFPQyxHQUFHK0IsYUFFcEJqQixFQUFNLEdBRU5BLEVBRERVLEVBQ08sa0JBRUEsbUJBR1ZaLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKVyxNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYTixHQUFNQSxHQUVWTixRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsTUFDWmEsU0FBU0MsYUFBYSxhQUFhLFdBQy9CbEMsT0FBT21DLFNBQVNDLGlCQVF4QzNDLEVBQUUsWUFDYSxJQUFJSCxNQUNWSyxNQUVOTCxLQUFLRSxjQUFnQkMsRUFBRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKSB7XHJcbiAgICB0aGlzLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmluaXRVRWRpdG9yKCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicse1xyXG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXHJcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJ1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsZmlsZSk7XHJcbiAgICAgICAgcHVhYWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgaWYocGspe1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVhYWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxyXG4gICAgICAgICAgICAgICAgJ3RodW1ibmFpbCc6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVhYWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHmlrDpl7vlj5HooajmiJDlip/vvIEnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxuXHJcbiAgIE5ld3MucHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xyXG59KTsiXX0=
