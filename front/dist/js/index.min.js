function Banner(){this.bannerWidth=1263.33,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerul=$("#banner-ul"),this.liList=this.bannerul.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerul.append(e),n.bannerul.prepend(t),this.bannerul.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:10*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerul.animate({left:-1263.33*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerul.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerul.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerul.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate(),$(e).addClass("active").siblings().removeClass("active")})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){puaajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");puaajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lcnVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsInBhcnNlSW50IiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwicHVhYWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsImxpc3RlbkNhdGVnb3J5U3dp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LDZCQUdUOUUsRUFBRSxZQUNlLElBQUlKLFFBQ1Z1RSxPQUVLLElBQUl6RCxPQUNWeUQiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbi8vICAgIGNvbnNvbGUubG9nKCcyMzI0Jyk7XHJcbi8vICAgdGhpcy5wZXJzb24gPSAnMTIzJztcclxuLy99XHJcbi8vQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XHJcbi8vICAgIGNvbnNvbGUubG9nKCdoZWxsbycsd29yZCk7XHJcbi8vfTtcclxuLy92YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vL2NvbnNvbGUubG9nKGJhbm5lci5wZXJzb24pO1xyXG4vL2Jhbm5lci5ncmVldCgnODkwJyk7XHJcblxyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gMTI2My4zMztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJ1bCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lcnVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJDb3VudC0xKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJ1bC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJ1bC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgdGhpcy5iYW5uZXJ1bC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lcldpZHRoKihzZWxmLmJhbm5lckNvdW50KzIpLFwibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzZWxmLmJhbm5lckNvdW50OyBpKyspe1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYoaSA9PT0gMCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTArOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmKGlzU2hvdyl7XHJcbiAgICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJ1bC5hbmltYXRlKHtcImxlZnRcIjotMTI2My4zMypzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJ1bC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9MjtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwyMDAwKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVydWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJ1bC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbihpbmRleCxvYmope1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgICAgICQob2JqKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMtZGF0ZXRzKS8xMDAwO1xyXG4gICAgaWYgKHRpbWVzdGFtcCA8IDYwKSB7XHJcbiAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApIHtcclxuICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKTtcclxuICAgICAgICByZXR1cm4gbWludXRlcysn5YiG6ZKf5YmNJztcclxuICAgICAgICB9XHJcbiAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCl7XHJcbiAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjAvNjApO1xyXG4gICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcclxuICAgIH1cclxuXHJcbiAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCoyNCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCozMCl7XHJcbiAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MC8yNCk7XHJcbiAgICAgICAgcmV0dXJuIGRheXMrJ+WkqeWJjSc7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xyXG4gICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICByZXR1cm4geWVhcisnLycrbW9udGgrJy8nK2RheSsnICcraG91cisnOicrbWludXRlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHB1YWFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aGlz77ya5Luj6KGo5b2T5YmN6YCJ5Lit55qE6L+Z5LiqbGnmoIfnrb5cclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICBwdWFhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVtcHR577ya5Y+v5Lul5bCG6L+Z5Liq5qCH562+5LiL55qE5omA5pyJ5a2Q5YWD57Sg6YO95Yig5o6JXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
